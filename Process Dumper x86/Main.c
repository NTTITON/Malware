#include "Process Dump.h"

int main()
{
	unsigned long ulSize = 0;
	void* lpBase = 0;
	FILE* hFile = 0;

	if (lpBase = DumpProcess(GetCurrentProcess(), GetModuleHandle(0), &ulSize))
	{
		hFile = fopen("dump.exe", "wb");
		fwrite(lpBase,sizeof(unsigned char), ulSize,hFile);
		fclose(hFile);
		HeapFree(GetProcessHeap(),0,lpBase);
	}

	return 0;
}